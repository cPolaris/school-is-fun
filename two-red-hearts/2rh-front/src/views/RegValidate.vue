<template>
  <div>
    <md-layout md-align="center">
      <md-card md-with-hover id="additional-card">
        <md-card-header>
          <div class="md-title">Welcome!</div>
          <div class="md-subhead">
            Please provide some basic information to get started.
          </div>
        </md-card-header>
        <md-card-content>
          <form @submit.stop.prevent>

            <md-input-container>
              <label>Name</label>
              <md-input v-model="name" maxlength="50"></md-input>
            </md-input-container>

            <label>Gender</label>
            <div>
              <md-radio v-model="gender" name="gender-radio" md-value="f">Female</md-radio>
              <md-radio v-model="gender" name="gender-radio" md-value="m">Male</md-radio>
              <md-radio v-model="gender" name="gender-radio" md-value="o">Other</md-radio>
            </div>

            <!-- major selection injection point -->
            <md-input-container><label>Major</label>
              <md-select name="major-selection" v-model="major">
                <md-option value="0">AccountancyÂ -Â BUS</md-option>
                <md-option value="1">ActingÂ -Â FAA</md-option>
                <md-option value="2">Actuarial ScienceÂ -Â LAS</md-option>
                <md-option value="3">AdvertisingÂ -Â COM</md-option>
                <md-option value="4">Aerospace EngineeringÂ -Â ENG</md-option>
                <md-option value="5">African American StudiesÂ -Â LAS</md-option>
                <md-option value="6">Agri-AccountingÂ -Â ACES</md-option>
                <md-option value="7">Agribusiness, Markets &amp; ManagementÂ -Â ACES</md-option>
                <md-option value="8">Agricultural &amp; Biological EngineeringÂ -Â ACES</md-option>
                <md-option value="9">Agricultural &amp; Biological EngineeringÂ -Â ENG</md-option>
                <md-option value="10">Agricultural &amp; Consumer EconomicsÂ -Â ACES</md-option>
                <md-option value="11">Agricultural CommunicationsÂ -Â ACES</md-option>
                <md-option value="12">Agricultural Leadership EducationÂ -Â ACES</md-option>
                <md-option value="13">Agricultural Science EducationÂ -Â ACES</md-option>
                <md-option value="14">AgroecologyÂ -Â ACES</md-option>
                <md-option value="15">Animal SciencesÂ -Â ACES</md-option>
                <md-option value="16">AnthropologyÂ -Â LAS</md-option>
                <md-option value="17">Architectural StudiesÂ -Â FAA</md-option>
                <md-option value="18">Art Education (K-12)Â -Â FAA</md-option>
                <md-option value="19">Art HistoryÂ -Â FAA</md-option>
                <md-option value="20">Asian American StudiesÂ -Â LAS</md-option>
                <md-option value="21">AstronomyÂ -Â LAS</md-option>
                <md-option value="22">Atmospheric SciencesÂ -Â LAS</md-option>
                <md-option value="23">AudiologyÂ -Â AHS</md-option>
                <md-option value="24">BiochemistryÂ -Â LAS</md-option>
                <md-option value="25">BioengineeringÂ -Â ENG</md-option>
                <md-option value="26">Biological Sciences (Crop Sciences)Â -Â ACES</md-option>
                <md-option value="27">BiologyÂ -Â LAS</md-option>
                <md-option value="28">Business Process ManagementÂ -Â BUS</md-option>
                <md-option value="29">Chemical &amp; Biomolecular EngineeringÂ -Â LAS</md-option>
                <md-option value="30">ChemistryÂ -Â LAS</md-option>
                <md-option value="31">Child &amp; Adolescent DevelopmentÂ -Â ACES</md-option>
                <md-option value="32">Civil EngineeringÂ -Â ENG</md-option>
                <md-option value="33">Classical Archaeology^Â -Â LAS</md-option>
                <md-option value="34">Classical Civilization^Â -Â LAS</md-option>
                <md-option value="35">ClassicsÂ -Â LAS</md-option>
                <md-option value="36">CommunicationÂ -Â LAS</md-option>
                <md-option value="37">Community HealthÂ -Â AHS</md-option>
                <md-option value="38">Companion Animal &amp; Equine ScienceÂ -Â ACES</md-option>
                <md-option value="39">Comparative &amp; World LiteratureÂ -Â LAS</md-option>
                <md-option value="40">Computer EngineeringÂ -Â ENG</md-option>
                <md-option value="41">Computer ScienceÂ -Â ENG</md-option>
                <md-option value="42">Computer Science &amp; AnthropologyÂ -Â LAS</md-option>
                <md-option value="43">Computer Science &amp; AstronomyÂ -Â LAS</md-option>
                <md-option value="44">Computer Science &amp; ChemistryÂ -Â LAS</md-option>
                <md-option value="45">Computer Science &amp; LinguisticsÂ -Â LAS</md-option>
                <md-option value="46">Consumer Economics &amp; FinanceÂ -Â ACES</md-option>
                <md-option value="47">Costume Design &amp; TechnologyÂ -Â FAA</md-option>
                <md-option value="48">Crafts: CeramicsÂ -Â FAA</md-option>
                <md-option value="49">Crafts: MetalsÂ -Â FAA</md-option>
                <md-option value="50">Creative WritingÂ -Â LAS</md-option>
                <md-option value="51">Crop AgribusinessÂ -Â ACES</md-option>
                <md-option value="52">Crop SciencesÂ -Â ACES</md-option>
                <md-option value="53">CropsÂ -Â ACES</md-option>
                <md-option value="54">Cultural Linguistic DiversityÂ -Â AHS</md-option>
                <md-option value="55">DanceÂ -Â FAA</md-option>
                <md-option value="56">DieteticsÂ -Â ACES</md-option>
                <md-option value="57">Early Childhood Education (Birth-Grade 2)Â -Â EDU</md-option>
                <md-option value="58">Earth, Society &amp; Environmental SustainabilityÂ -Â LAS</md-option>
                <md-option value="59">East Asian Languages &amp; CulturesÂ -Â LAS</md-option>
                <md-option value="60">EconomicsÂ -Â LAS</md-option>
                <md-option value="61">Electrical EngineeringÂ -Â ENG</md-option>
                <md-option value="62">Elementary Education (Grades 1-6)Â -Â EDU</md-option>
                <md-option value="63">Engineering MechanicsÂ -Â ENG</md-option>
                <md-option value="64">Engineering PhysicsÂ -Â ENG</md-option>
                <md-option value="65">EnglishÂ -Â LAS</md-option>
                <md-option value="66">EntrepreneurshipÂ -Â BUS</md-option>
                <md-option value="67">Environmental Economics &amp; PolicyÂ -Â ACES</md-option>
                <md-option value="68">Family StudiesÂ -Â ACES</md-option>
                <md-option value="69">Farm ManagementÂ -Â ACES</md-option>
                <md-option value="70">FinanceÂ -Â BUS</md-option>
                <md-option value="71">Finance in Agri-BusinessÂ -Â ACES</md-option>
                <md-option value="72">Financial PlanningÂ -Â ACES</md-option>
                <md-option value="73">Fish &amp; Wildlife ConservationÂ -Â ACES</md-option>
                <md-option value="74">Food ScienceÂ -Â ACES</md-option>
                <md-option value="75">Food Science &amp; Human NutritionÂ -Â ACES</md-option>
                <md-option value="76">FrenchÂ -Â LAS</md-option>
                <md-option value="77">Gender &amp; Women&#039;s StudiesÂ -Â LAS</md-option>
                <md-option value="78">Geography &amp; Geographic Information ScienceÂ -Â LAS</md-option>
                <md-option value="79">GeologyÂ -Â LAS</md-option>
                <md-option value="80">Germanic Languages &amp; LiteratureÂ -Â LAS</md-option>
                <md-option value="81">Global Change &amp; Landscape DynamicsÂ -Â ACES</md-option>
                <md-option value="82">Global StudiesÂ -Â LAS</md-option>
                <md-option value="83">Graphic DesignÂ -Â FAA</md-option>
                <md-option value="84">Greek^Â -Â LAS</md-option>
                <md-option value="85">Health Education &amp; PromotionÂ -Â AHS</md-option>
                <md-option value="86">Health Planning &amp; AdministrationÂ -Â AHS</md-option>
                <md-option value="87">Health Sciences, Interdisciplinary Â -Â AHS</md-option>
                <md-option value="88">HistoryÂ -Â LAS</md-option>
                <md-option value="89">History of ArtÂ -Â LAS</md-option>
                <md-option value="90">Horticultural Food SystemsÂ -Â ACES</md-option>
                <md-option value="91">Hospitality ManagementÂ -Â ACES</md-option>
                <md-option value="92">Human Development &amp; Family StudiesÂ -Â ACES</md-option>
                <md-option value="93">Human Dimensions of the EnvironmentÂ -Â ACES</md-option>
                <md-option value="94">Human NutritionÂ -Â ACES</md-option>
                <md-option value="95">Industrial DesignÂ -Â FAA</md-option>
                <md-option value="96">Industrial EngineeringÂ -Â ENG</md-option>
                <md-option value="97">Information Systems &amp; Information TechnologyÂ -Â BUS</md-option>
                <md-option value="98">Integrative BiologyÂ -Â LAS</md-option>
                <md-option value="99">Interdisciplinary StudiesÂ -Â LAS</md-option>
                <md-option value="100">International BusinessÂ -Â BUS</md-option>
                <md-option value="101">ItalianÂ -Â LAS</md-option>
                <md-option value="102">Jazz StudiesÂ -Â FAA</md-option>
                <md-option value="103">Jewish StudiesÂ -Â LAS</md-option>
                <md-option value="104">JournalismÂ -Â COM</md-option>
                <md-option value="105">KinesiologyÂ -Â AHS</md-option>
                <md-option value="106">Kinesiology - Physical Education (K-12)Â -Â AHS</md-option>
                <md-option value="107">Landscape Architecture Â -Â FAA</md-option>
                <md-option value="108">Latin^Â -Â LAS</md-option>
                <md-option value="109">Latin American StudiesÂ -Â LAS</md-option>
                <md-option value="110">Latina/Latino StudiesÂ -Â LAS</md-option>
                <md-option value="111">Learning &amp; Education StudiesÂ -Â EDU</md-option>
                <md-option value="112">Lighting DesignÂ -Â FAA</md-option>
                <md-option value="113">LinguisticsÂ -Â LAS</md-option>
                <md-option value="114">ManagementÂ -Â BUS</md-option>
                <md-option value="115">MarketingÂ -Â BUS</md-option>
                <md-option value="116">Materials Science &amp; EngineeringÂ -Â ENG</md-option>
                <md-option value="117">MathematicsÂ -Â LAS</md-option>
                <md-option value="118">Mathematics &amp; Computer ScienceÂ -Â LAS</md-option>
                <md-option value="119">Mechanical EngineeringÂ -Â ENG</md-option>
                <md-option value="120">Media &amp; Cinema StudiesÂ -Â COM</md-option>
                <md-option value="121">Medieval CivilizationÂ -Â LAS</md-option>
                <md-option value="122">Middle Grades Education (Grades 5-8)Â -Â EDU</md-option>
                <md-option value="123">Molecular &amp; Cellular BiologyÂ -Â LAS</md-option>
                <md-option value="124">MusicÂ -Â FAA</md-option>
                <md-option value="125">Music Composition TheoryÂ -Â FAA</md-option>
                <md-option value="126">Music Education (K-12)Â -Â FAA</md-option>
                <md-option value="127">Music Instrumental PerformanceÂ -Â FAA</md-option>
                <md-option value="128">Music Open StudiesÂ -Â FAA</md-option>
                <md-option value="129">Music Voice PerformanceÂ -Â FAA</md-option>
                <md-option value="130">MusicologyÂ -Â FAA</md-option>
                <md-option value="131">Natural Resources &amp; Environmental SciencesÂ -Â ACES</md-option>
                <md-option value="132">Neuroscience of CommunicationÂ -Â AHS</md-option>
                <md-option value="133">New MediaÂ -Â FAA</md-option>
                <md-option value="134">Nuclear, Plasma &amp; Radiological EngineeringÂ -Â ENG</md-option>
                <md-option value="135">Nursing^^Â -Â NUR</md-option>
                <md-option value="136">PaintingÂ -Â FAA</md-option>
                <md-option value="137">PhilosophyÂ -Â LAS</md-option>
                <md-option value="138">PhotographyÂ -Â FAA</md-option>
                <md-option value="139">PhysicsÂ -Â LAS</md-option>
                <md-option value="140">Plant Biotechnology &amp; Molecular BiologyÂ -Â ACES</md-option>
                <md-option value="141">Plant Protection Â -Â ACES</md-option>
                <md-option value="142">Policy, International Trade &amp; DevelopmentÂ -Â ACES</md-option>
                <md-option value="143">Political ScienceÂ -Â LAS</md-option>
                <md-option value="144">PortugueseÂ -Â LAS</md-option>
                <md-option value="145">PsychologyÂ -Â LAS</md-option>
                <md-option value="146">Public Policy &amp; LawÂ -Â ACES</md-option>
                <md-option value="147">Recreation ManagementÂ -Â AHS</md-option>
                <md-option value="148">Recreation, Sport &amp; TourismÂ -Â AHS</md-option>
                <md-option value="149">Rehabilitation StudiesÂ -Â AHS</md-option>
                <md-option value="150">ReligionÂ -Â LAS</md-option>
                <md-option value="151">Resource Conservation &amp; Restoration EcologyÂ -Â ACES</md-option>
                <md-option value="152">Russian, East European &amp; Eurasian StudiesÂ -Â LAS</md-option>
                <md-option value="153">Scenic DesignÂ -Â FAA</md-option>
                <md-option value="154">Scenic TechnologyÂ -Â FAA</md-option>
                <md-option value="155">Science, Pre-Veterinary &amp; MedicalÂ -Â ACES</md-option>
                <md-option value="156">SculptureÂ -Â FAA</md-option>
                <md-option value="157">Secondary EducationÂ -Â LAS</md-option>
                <md-option value="158">Secondary Education: AgriculturalÂ -Â ACES</md-option>
                <md-option value="159">Secondary Education: BiologyÂ -Â LAS</md-option>
                <md-option value="160">Secondary Education: ChemistryÂ -Â LAS</md-option>
                <md-option value="161">Secondary Education: Earth ScienceÂ -Â LAS</md-option>
                <md-option value="162">Secondary Education: English Â -Â LAS</md-option>
                <md-option value="163">Secondary Education: MathematicsÂ -Â LAS</md-option>
                <md-option value="164">Secondary Education: PhysicsÂ -Â LAS</md-option>
                <md-option value="165">Secondary Education: Social StudiesÂ -Â LAS</md-option>
                <md-option value="166">Slavic StudiesÂ -Â LAS</md-option>
                <md-option value="167">Social WorkÂ -Â SSW</md-option>
                <md-option value="168">SociologyÂ -Â LAS</md-option>
                <md-option value="169">Sound Design &amp; TechnologyÂ -Â FAA</md-option>
                <md-option value="170">SpanishÂ -Â LAS</md-option>
                <md-option value="171">Special EducationÂ -Â EDU</md-option>
                <md-option value="172">Speech &amp; Hearing ScienceÂ -Â AHS</md-option>
                <md-option value="173">Speech Language PathologyÂ -Â AHS</md-option>
                <md-option value="174">Sport ManagementÂ -Â AHS</md-option>
                <md-option value="175">Stage ManagementÂ -Â FAA</md-option>
                <md-option value="176">StatisticsÂ -Â LAS</md-option>
                <md-option value="177">Statistics &amp; Computer ScienceÂ -Â LAS</md-option>
                <md-option value="178">Supply Chain ManagementÂ -Â BUS</md-option>
                <md-option value="179">Systems Engineering and Design (formerly General Engineering)Â -Â ENG</md-option>
                <md-option value="180">Teacher Education: Art (K-12)Â -Â FAA</md-option>
                <md-option value="181">Teacher Education: French (K-12)Â -Â LAS</md-option>
                <md-option value="182">Teacher Education: German (K-12)Â -Â LAS</md-option>
                <md-option value="183">Teacher Education: Japanese (K-12)Â -Â LAS</md-option>
                <md-option value="184">Teacher Education: Kinesiology - Physical Education (K-12)Â -Â AHS</md-option>
                <md-option value="185">Teacher Education: Latin (K-12)Â -Â LAS</md-option>
                <md-option value="186">Teacher Education: Mandarin Chinese (K-12)Â -Â LAS</md-option>
                <md-option value="187">Teacher Education: Spanish (K-12)Â -Â LAS</md-option>
                <md-option value="188">Technical Systems ManagementÂ -Â ACES</md-option>
                <md-option value="189">Technology &amp; Management (Animal Sciences)Â -Â ACES</md-option>
                <md-option value="190">TheatreÂ -Â FAA</md-option>
                <md-option value="191">Theatre StudiesÂ -Â FAA</md-option>
                <md-option value="192">Tourism ManagementÂ -Â AHS</md-option>
                <md-option value="193">UndeclaredÂ -Â DGS</md-option>
                <md-option value="194">Urban Studies &amp; PlanningÂ -Â FAA</md-option>
              </md-select>
            </md-input-container>

            <md-input-container>
              <label>Bio</label>
              <md-input v-model="bio" maxlength="255"></md-input>
            </md-input-container>

            <label>Traits</label>
            <div class="md-subhead">Please check all the traits below that you think you match or can relate to!</div>

            <md-checkbox v-model="tagboxes[0]">Fueled by music</md-checkbox>
            <md-checkbox v-model="tagboxes[1]">Feeds on books</md-checkbox>
            <md-checkbox v-model="tagboxes[2]">Feeds on Netflix (or similar)</md-checkbox>
            <md-checkbox v-model="tagboxes[3]">PC master race</md-checkbox>
            <md-checkbox v-model="tagboxes[4]">Console gamer</md-checkbox>
            <md-checkbox v-model="tagboxes[5]">No waifu no laifu</md-checkbox>
            <md-checkbox v-model="tagboxes[6]">Seriouly social ğŸ‰</md-checkbox>
            <md-checkbox v-model="tagboxes[7]">à¤Ã–lä¸«glĞ”ãƒ’ (polyglot)</md-checkbox>
            <md-checkbox v-model="tagboxes[8]">Gym = â¤ï¸</md-checkbox>
            <md-checkbox v-model="tagboxes[9]">Runner</md-checkbox>
            <md-checkbox v-model="tagboxes[10]">ğŸ”ğŸ¥“ğŸ¥“ğŸ¥“ğŸŒ®ğŸŒ¯ğŸ–ğŸ–ğŸ–ğŸ”</md-checkbox>
            <md-checkbox v-model="tagboxes[11]">ğŸğŸŠğŸ‹ğŸŒğŸ‰ğŸ‡ğŸ“ğŸ¥‘ğŸ¥—</md-checkbox>
            <md-checkbox v-model="tagboxes[12]">ğŸºğŸ¸ğŸ»ğŸ¥ğŸ·ğŸ¹ğŸ¼</md-checkbox>
            <md-checkbox v-model="tagboxes[13]">ğŸ€âš½ï¸ğŸˆâš¾ï¸ğŸ¾ğŸğŸ“ğŸ¸ğŸ’</md-checkbox>
            <md-checkbox v-model="tagboxes[14]">ğŸ¶ğŸ±ğŸ•ğŸˆğŸ¢ğŸ•ŠğŸ‡ğŸ¦ğŸ¦„ (pets)</md-checkbox>
            <md-checkbox v-model="tagboxes[15]">Would rather go sleep</md-checkbox>
            <md-checkbox v-model="tagboxes[16]">Other</md-checkbox>

          </form>
          <md-button class="md-raised md-primary" @click.native="submit">Done</md-button>
        </md-card-content>
      </md-card>
    </md-layout>

    <md-dialog-alert
      md-ok-text="OK"
      :md-content="alerttext"
      ref="alerterr">
    </md-dialog-alert>
  </div>
</template>

<script>
  export default {
    cred: '',
    name: 'signup',
    data() {
      return {
        alerttext: 'Error',
        name: '',
        gender: '',
        major: '',
        bio: '',
        tagboxes: Array(17).fill(false)
      };
    },
    methods: {
      submit() {
        const hobbyIds = [];
        for (let i = 0; i < this.tagboxes.length; i++) {
          if (this.tagboxes[i]) {
            hobbyIds.push(i + 1);
          }
        }

        this.$http.post('/api/usersregv', {
          cred: this.cred,
          name: this.name,
          genderCode: this.gender,
          majorCode: parseInt(this.major),
          bio: this.bio,
          hobbyIds
        }).then((res) => {
          const resObj = JSON.parse(res.bodyText);

          this.$store.commit('loadApiKey', resObj.newToken);

          this.$http.get(`/api/users/${resObj.username}`).then((res) => {
            this.$store.commit('loadUser', JSON.parse(res.bodyText));
            this.$router.push('/home');
          }, (err) => {
            this.alert.content = `Error: ${err.bodyText}`;
            this.openDialog('alerterr');
          });

        }, (err) => {
          this.alerttext = `Error: ${err.bodyText}`;
          this.openDialog('alerterr');
        });
      },
      openDialog(ref) {
        this.$refs[ref].open();
      },
      closeDialog(ref) {
        this.$refs[ref].close();
      }
    },
    created () {
      this.cred = this.$route.params.cred;
    }
  };
</script>

<style>
  #additional-card {
    margin-top: 100px;
    margin-bottom: 100px;
    max-width: 650px;
    width: 100%;
    cursor: default
  }
</style>
